# swift 可选类型
**swift用可选类型处理值缺失的情况** 


~~~swift
var opt: Int?
opt = Int("123")    //opt = 123
opt = Int("string")//opt = nil
~~~
上面定义了opt为一个可选类型的变量，

**注意swift中nil**

swift中nil不能用于常量和变量，如果你定义变量有可能值缺失最好把它定义为可选类型。swift中的nil不像objc中一样指向一个为空的对象，swift中的nil有确定的值，用来表示值缺失。

# 可选类型的强制解析（forced unwrapping）
~~~swift
let val = opt!
~~~
上面的语句将opt的值赋给常量val，当你强制解析一个可选类型的变量时，一定要保证被解析的变量当前的值是非nil不然会导致运行时错误，要命的是及时这样编译仍能通过，不过在程序运行时就有可能崩溃。关于强制解析一个nil的可选类型会导致运行时错误的原因我猜想大致如下，opt被解析为nil，而我们很可能把这个nil赋给一个常量或变量而swift中的nil是不能用于常量或变量的，因此会导致运行时错误。(自己的猜想未验证)

# if语句判断可选类型和可选绑定
~~~swift
if opt == nil {
	statements
} 
//或者可以用 != nil
//可选绑定使用可选绑定（optional binding）来判断可选类型是否包含值，如果包含就把值赋给一个临时常量或者变量。
if let val = opt! {
	statements
}
~~~

# 隐式可选类型
~~~swift
//顾名思义隐式解析就是不用向强制解析一样在可选变量后面加一个！
var opt: Int!
let val = opt
~~~

**隐式解析使用的前提**
必须确定变量在第一次赋值之后整个生命周期一直有值，如果变量赋值之后还有可能为nil不要使用隐式解析可选类型。同样当使用一个为nil的隐式可选类型也是为引发运行时错误的。



